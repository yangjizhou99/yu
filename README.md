# 鱼塘小游戏（Vite + React + TS）

## 启动
```bash
npm install
npm run dev
# 浏览器打开提示的本地地址
```

> 如果页面样式没有生效，请确保联网（项目使用了 Tailwind 的 CDN）。

## 功能特色

### 🐟 基础功能
- **添加鱼类**：点击"+1 条鱼"按钮添加随机鱼（会自动游动）
- **投喂系统**：点击水面投喂饲料，包含普通、稀有、传说三种品质
- **智能觅食**：鱼在视野内会朝饲料游去并吃掉，每吃1个体型增长
- **成长系统**：鱼体型可累积增长，大鱼游速更慢，小鱼更敏捷

### 🎨 自定义功能
- **绘鱼面板**：点击"🎨 自定义新鱼"打开绘制界面
- **多种形状**：支持神仙鱼、旗鱼、长尾斗鱼三种轮廓
- **个性化**：可设置用户名和宠物鱼名字
- **轮廓裁剪**：只能在鱼体轮廓内绘制，超出部分自动裁剪

### 🖼 海洋生物贴图系统（v5.3新增）
- **贴图库**：6种程序生成的海洋生物皮肤
  - 🐠 小丑鱼：经典橙白条纹
  - 🐟 蓝吊鱼：深蓝渐变配黄尾
  - 🐲 锦鲤：白底随机红斑
  - 🦈 鲸鲨肌理：深海蓝配白色斑点
  - 🦁 狮子鱼：米色底深棕斜纹
  - 🌈 鹦嘴鱼：彩虹渐变横纹
- **智能搭配**：不同贴图自动匹配最适合的鱼形轮廓
- **即时生成**：选择贴图后立即在当前视野生成新鱼

### 🌊 视觉效果
- **海洋背景**：深海渐变 + 动态光斑 + 沙地海床
- **高级渲染**：轮廓裁剪、泳动微波、顶光腹影效果
- **相机系统**：支持缩放、拖拽，4096x2304巨型鱼塘

### 💾 数据管理
- **本地存档**：自动保存鱼类和饲料状态
- **版本兼容**：支持存档版本迁移
- **持久化**：刷新页面后数据不丢失

## 操作指南
- **投喂**：左键点击水面
- **视角控制**：
  - 滚轮缩放
  - 空格键 + 拖拽移动视角
  - 右键/中键拖拽移动视角
- **调试**：Alt+V 显示/隐藏鱼类视野圈
- **管理**：清空鱼/清空饲料/清空存档按钮

## 文件结构
```
.
├─ index.html           # 入口（含 Tailwind CDN）
├─ src/
│  ├─ main.tsx         # React 入口
│  ├─ App.tsx          # 游戏主组件（包含所有逻辑）
│  ├─ components/      # 组件目录
│  ├─ types/           # 类型定义
│  └─ assets/          # 资源文件
├─ package.json
├─ tsconfig.json
├─ vite.config.ts
└─ 更新日志.txt        # 版本更新记录
```

## 技术特点
- **高性能渲染**：Canvas 2D + 高DPI适配
- **智能AI**：鱼类觅食行为和边界处理
- **程序生成**：所有贴图均为代码生成，无外部依赖
- **响应式设计**：自适应不同屏幕尺寸

## 常见问题
- **画布大小不对/模糊**：组件内已做高 DPI 适配（根据容器大小和 dpr 设置画布）
- **性能**：当前为 O(N_fish × N_food) 的简单检测；鱼或饲料很多时可以做空间划分（网格/四叉树）
- **贴图显示**：贴图鱼需要等待图片加载完成才能正确显示纹理

## 版本历史
- **v5.3** - 海洋生物贴图系统
- **v5.2** - 自定义绘鱼功能
- **v5.1** - 高级渲染效果
- **v5.0** - 相机系统和巨型鱼塘
